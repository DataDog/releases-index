{
  "Content": "# cf-mysql-release v35\r\n\r\n**Notice:** Based on your responses to the [v34 poll](https://github.com/cloudfoundry/cf-mysql-release/releases/tag/v34), this will be the last release in which we include updated spiff templates. That means that starting with v36, you'll want to check out [cf-mysql-deployment](https://github.com/cloudfoundry/cf-mysql-deployment) or continue building your manifest by other means.\r\n\r\nAlso, using [cf-mysql-deployment](https://github.com/cloudfoundry/cf-mysql-deployment) just got easier with the [official GA](https://lists.cloudfoundry.org/archives/list/cf-bosh@lists.cloudfoundry.org/message/L6GNJMAVZEJX7ZQFOINWBRO7NDG56Y5H/) of the [bosh v2 CLI](http://bosh.io/docs/cli-v2.html)!\r\n\r\n## Dependency Updates\r\n\r\n- cf-mysql-release should use MariaDB 10.1.22 [[#141072891](https://www.pivotaltracker.com/story/show/141072891)]\r\n\r\n- Use routing-release instead of our own fork of route-registrar [[#135377279](https://www.pivotaltracker.com/story/show/135377279)]\r\n\r\n  For a long time, cf-mysql-release has used a fork of the `route-registrar` library. To stay current, we now require [routing-release](https://github.com/cloudfoundry-incubator/routing-release). Please note the [README.md](README.md) now covers this prerequisite.\r\n\r\n  **Note:** When switching to the canonical distribution of `route-registrar`, we had to change the URL of the proxy. Where once you'd visit `https://proxy-0-p-mysql.SYSTEM-DOMAIN/`, now the instance index is pre-pended: `https://0-proxy-p-mysql.SYSTEM-DOMAIN/`.\r\n\r\n    - As an operator I can navigate to a well-known URL to discover a list of URLs to the proxy dashboards [[#138180969](https://www.pivotaltracker.com/story/show/138180969)]\r\n\r\n      If you use `cf-mysql-deployment`, and include the [register-proxy-route.yml](https://github.com/cloudfoundry/cf-mysql-deployment/blob/v35/operations/register-proxy-route.yml) operations file, the deployment will automatically include a proxy aggregator: `https://proxy-p-mysql.SYSTEM-DOMAIN/` which will include links to the proxy dashboards, regardless of the naming scheme. This feature is only available when using BOSH links.\r\n\r\n    - As an Operator, I'd like the docs to cover how to upgrade from v34 to v35 which uses routing-release [[#144161787](https://www.pivotaltracker.com/story/show/144161787)]\r\n    - cloudfoundry/cf-mysql-release #157: Unused nats properties [[#143997101](https://www.pivotaltracker.com/story/show/143997101)]\r\n\r\n    Some nats properties are no longer used by our jobs directly, but routing-release still uses the same properties so deployment manifests do not need to change.\r\n\r\n## Providing and Consuming BOSH links\r\n\r\nUsing [BOSH links](https://bosh.io/docs/links.html) simplifies manifests and manifest generation - every time a BOSH release uses a link, that's less copying and pasting via template.\r\n- cloudfoundry/cf-mysql-release #154: Provide database links for mysql and proxy jobs [[#143086033](https://www.pivotaltracker.com/story/show/143086033)]\r\n- cloudfoundry/cf-mysql-release #149: Optionally consume cc link for app_domains in smoke tests [[#140458283](https://www.pivotaltracker.com/story/show/140458283)]\r\n\r\n## Bug Fixes and Minor Improvements\r\n- [BUG] Upgrading from older releases fails to start mariadb [[#139334661](https://www.pivotaltracker.com/story/show/139334661)]\r\n- [BUG] Logs not draining to syslog [[#143069405](https://www.pivotaltracker.com/story/show/143069405)]\r\n  - Fixes a regression in v34 that logs were not sent to syslog.\r\n- [BUG] mysql_release fails to deploy to a BOSH director using local_dns [[#143221877](https://www.pivotaltracker.com/story/show/143221877)]\r\n- [BUG] pre-start hangs indefinitely when cluster is not healthy [[#141824537](https://www.pivotaltracker.com/story/show/141824537)]\r\n- [BUG] If a node is failing, mariadb_ctrl waits for mysql forever [[#140517205](https://www.pivotaltracker.com/story/show/140517205)]\r\n- [BUG] roadmin user doesn't have read privs for admin operations? [[#139594503](https://www.pivotaltracker.com/story/show/139594503)]\r\n- cloudfoundry/cf-mysql-release #155: Allow innodb_flush_log_at_trx_commit to be configurable [[#143693837](https://www.pivotaltracker.com/story/show/143693837)]\r\n- cloudfoundry/cf-mysql-release #158: Nil the consul link in the example stub [[#144138871](https://www.pivotaltracker.com/story/show/144138871)]\r\n- cloudfoundry/cf-mysql-release #159: add private key option to download-logs script [[#144411627](https://www.pivotaltracker.com/story/show/144411627)]\r\n- As an Operator, if an errand is a no-op, it's better to exit 0 than error [[#139054911](https://www.pivotaltracker.com/story/show/139054911)]\r\n- Stop attaching the tarball to the release notes of cf-mysql-release [[#139611695](https://www.pivotaltracker.com/story/show/139611695)]\r\n\r\n## Documentation\r\n- Proxy startup and shutdown delay descriptions are backwards in spec [[#139996733](https://www.pivotaltracker.com/story/show/139996733)]\r\n- NOTICE files on various repositories are out of date [[#141360157](https://www.pivotaltracker.com/story/show/141360157)]\r\n\r\n## Manifest Changes\r\n\r\n- New: `cf.mysql.innodb_flush_log_at_trx_commit`, optional, defaults to 1.\r\n- New: `cf_mysql.proxy.api_aggregator_port`: optional, defaults to 8082.\r\n- New: `cf_mysql.proxy.api_uri`, required when deploying the proxy aggregator.\r\n- Removed: `cf_mysql.external_host`\r\n- Removed: `cf_mysql.standalone`"
}