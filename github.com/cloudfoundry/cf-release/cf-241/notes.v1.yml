{
  "Content": "The cf-release v241 was released on August 29, 2016.\n\n**IMPORTANT**\n- **UPDATE 2016-09-02 17:06 UTC** - [MySQL implicitly ends transactions before (and often after) certain statement including DDL statements](https://dev.mysql.com/doc/refman/5.7/en/implicit-commit.html). A Cloud Controller database migration in CF-241 is encrypting the specified buildpack of an application as this column could contain a Git url containing a username and password. To perform this migration, it creates new columns, encrypts the existing buildpack data and saves it to the new columns, then deletes the old column. This results in a period of time where Cloud Controllers running the code from a previous release can potentially write data to the old column, which is about to be deleted, when an app is pushed with a specified buildpack. While these sort of migrations are uncommon, this is not the first time Cloud Controller has made this sort of migration. Operators that are particularly sensitive to this can always scale their Cloud Controller to a single instance in order to take downtime while the migration is performed. [The CAPI team intends to explore how we can make migrations on MySQL better in the future](https://www.pivotaltracker.com/story/show/129709617).\n- **UPDATE 2016-09-01 21:36 UTC** - The underlying Sequel gem automatically runs migrations in a transaction for RDBMs that support transactions for DDL statements. This means PostgreSQL will run the entire migration in a transaction, but MySQL will not. We are still determining the proper steps to take for MySQL.\n- **UPDATE 2016-09-01 17:25 UTC** - The Cloud Controller database migration in CF-241 is not wrapped in a transaction. During a rolling deploy of Cloud Controllers, API requests to Cloud Controllers with the previous code could result in data inconsistencies. We will update these release notes when we determine the proper resolution.\n- CVE-2016-6638: The Cloud Controller in CF-241 contains a database migration to encrypt an app's specified buildpack at rest. Although it is not recommended, a user could specify a git buildpack url containing a username and password. This migration will cause `/v2/apps` API (or any API call that returns app resource data through inline-relations-depth or summary endpoints) to fail during the rolling deploy as the migration is performed before the updated Cloud Controller(s) are deployed.\n- This release updates the version of PostgreSQL used in the `postgres` job to 9.4.9 from 9.4.6. This also drops support for being able to upgrade from PostgreSQL 9.4.2.  Before upgrading to this or later versions of `cf-release`, you must first upgrade to v226 or higher.\n- This release introduces official support for running the etcd cluster (shared by several components such as Routing API and the loggregator subsystem, but _not_ Diego which uses its own secure cluster) in secure TLS mode.  Upgrading an existing deployment with an insecure etcd cluster to a secure one with minimal downtime is non-trivial.  Instructions and additional information for this procedure can be found [here](https://docs.google.com/document/d/1ZzWzp3H6H3t1ikk6Fl-8x1LX2a_0dHPJ5MMLEwY0inI/edit?usp=sharing).  If you are using the manifest generation scripts included within the `cf-release` repo to generate manifests, you're **strongly recommended** to upgrade to a secure etcd cluster at this point.  The instructions above assume you are upgrading to a secure etcd cluster from a pre-v241 Cloud Foundry deployment and will not apply as smoothly if you later attempt to upgrade a post-v241 non-TLS etcd cluster to a TLS cluster within the Cloud Foundry deployment.\n\n**Contents:**\n- \u003ca href='#cc-and-service-broker-apis'\u003eCC and Service Broker APIs\u003c/a\u003e\n- \u003ca href='#identity'\u003eIdentity\u003c/a\u003e\n- \u003ca href='#routing'\u003eRouting\u003c/a\u003e\n- \u003ca href='#loggregator'\u003eLoggregator\u003c/a\u003e\n- \u003ca href='#buildpacks-and-stacks'\u003eBuildpacks and Stacks\u003c/a\u003e\n- \u003ca href='#dea-warden-hm9000-runtime'\u003eDEA-Warden-HM9000 Runtime\u003c/a\u003e\n- \u003ca href='#internal-components'\u003eInternal Components\u003c/a\u003e\n- \u003ca href='#recommended-versions-additional-releases'\u003eRecommended Versions of Additional Releases\u003c/a\u003e\n- \u003ca href='#job-spec-changes'\u003eJob Spec Changes\u003c/a\u003e\n- \u003ca href='#recommended-bosh-stemcell-versions'\u003eRecommended BOSH Stemcell Versions\u003c/a\u003e\n\n## \u003ca name='cc-and-service-broker-apis'\u003e\u003c/a\u003eCC and Service Broker APIs\n\nContains [CAPI release v1.3.0](https://github.com/cloudfoundry/capi-release/tree/1.3.0). Release notes for [v1.2.0](https://github.com/cloudfoundry/capi-release/releases/tag/1.2.0) and [v1.3.0](https://github.com/cloudfoundry/capi-release/releases/tag/1.3.0)\n\n## \u003ca name='identity'\u003e\u003c/a\u003eIdentity\n\nNo Changes\n\n## \u003ca name='routing'\u003e\u003c/a\u003eRouting\n\nRouting release bumped to 0.137.0 - [Release Notes](https://github.com/cloudfoundry-incubator/routing-release/releases/tag/0.137.0)\n\n## \u003ca name='loggregator'\u003e\u003c/a\u003eLoggregator\n- Loggregator now provides `metron_agent_windows` so you can run the Metron Agent on Microsoft Windows Diego Cells.\n- Loggregator now supports dynamic IPs after fixing [this issue](https://www.pivotaltracker.com/story/show/117257489).\n\n## \u003ca name='buildpacks-and-stacks'\u003e\u003c/a\u003eBuildpacks and Stacks\n\n### stacks\n\nupdated to 1.78.0 (from 1.72.0)\n\n#### [1.78.0](https://github.com/cloudfoundry/stacks/releases/tag/1.78.0)\n\n[USN-3067-1: HarfBuzz vulnerabilities](http://www.ubuntu.com/usn/usn-3067-1/) Ubuntu Security Notice USN-3067-1:\n- [CVE-2015-8947](http://people.ubuntu.com/~ubuntu-security/cve/CVE-2015-8947): hb-ot-layout-gpos-table.hh in HarfBuzz before 1.0.5 allows remote attackers to cause a denial of service (buffer over-read) or possibly have unspecified other impact via crafted data, a different vulnerability than CVE-2016-2052.\n- [CVE-2016-2052](http://people.ubuntu.com/~ubuntu-security/cve/CVE-2016-2052): Multiple unspecified vulnerabilities in HarfBuzz before 1.0.6, as used in Google Chrome before 48.0.2564.82, allow attackers to cause a denial of service or possibly have other impact via crafted data, as demonstrated by a buffer over-read resulting from an inverted length check in hb-ot-font.cc, a different issue than CVE-2015-8947.\n\n[USN-3068-1: Libidn vulnerabilities](http://www.ubuntu.com/usn/usn-3068-1/) Ubuntu Security Notice USN-3068-1:\n- [CVE-2015-2059](http://people.ubuntu.com/~ubuntu-security/cve/CVE-2015-2059): The stringprep_utf8_to_ucs4 function in libin before 1.31, as used in jabberd2, allows context-dependent attackers to read system memory and possibly have other unspecified impact via invalid UTF-8 characters in a string, which triggers an out-of-bounds read.\n- [CVE-2015-8948](http://people.ubuntu.com/~ubuntu-security/cve/CVE-2015-8948): Solve out-of-bounds-read when reading one zero byte as input\n- [CVE-2016-6261](http://people.ubuntu.com/~ubuntu-security/cve/CVE-2016-6261): out-of-bounds stack read in idna_to_ascii_4i\n- [CVE-2016-6262](http://people.ubuntu.com/~ubuntu-security/cve/CVE-2016-6262): Solve out-of-bounds-read when reading one zero byte as input\n- [CVE-2016-6263](http://people.ubuntu.com/~ubuntu-security/cve/CVE-2016-6263): stringprep_utf8_nfkc_normalize reject invalid UTF-8\n\n#### [1.77.0](https://github.com/cloudfoundry/stacks/releases/tag/1.77.0)\n\n[USN-3064-1: GnuPG vulnerability](http://www.ubuntu.com/usn/usn-3064-1/) Ubuntu Security Notice USN-3064-1:\n- [CVE-2016-6313](http://people.ubuntu.com/~ubuntu-security/cve/CVE-2016-6313): random number generator prediction\n\n[USN-3065-1: Libgcrypt vulnerability](http://www.ubuntu.com/usn/usn-3065-1/) Ubuntu Security Notice USN-3065-1:\n- [CVE-2016-6313](http://people.ubuntu.com/~ubuntu-security/cve/CVE-2016-6313): random number generator prediction\n\n#### [1.76.0](https://github.com/cloudfoundry/stacks/releases/tag/1.76.0)\n\n[USN-3063-1: Fontconfig vulnerability](http://www.ubuntu.com/usn/usn-3063-1/) Ubuntu Security Notice USN-3063-1:\n- [CVE-2016-5384](http://people.ubuntu.com/~ubuntu-security/cve/CVE-2016-5384): fontconfig before 2.12.1 does not validate offsets, which allows localusers to trigger arbitrary free calls and consequently conduct double freeattacks and execute arbitrary code via a crafted cache file.\n\n#### [1.75.0](https://github.com/cloudfoundry/stacks/releases/tag/1.75.0)\n\n[USN-3061-1: OpenSSH vulnerabilities](http://www.ubuntu.com/usn/usn-3061-1/) Ubuntu Security Notice USN-3061-1:\n- [CVE-2016-6210](http://people.ubuntu.com/~ubuntu-security/cve/CVE-2016-6210): User enumeration via covert timing channel\n- [CVE-2016-6515](http://people.ubuntu.com/~ubuntu-security/cve/CVE-2016-6515): The auth_password function in auth-passwd.c in sshd in OpenSSH before 7.3does not limit password lengths for password authentication, which allowsremote attackers to cause a denial of service (crypt CPU consumption) via along string.\n\n#### [1.74.0](https://github.com/cloudfoundry/stacks/releases/tag/1.74.0)\n\n[USN-3060-1: GD library vulnerabilities](http://www.ubuntu.com/usn/usn-3060-1/) Ubuntu Security Notice USN-3060-1:\n- [CVE-2016-6132](http://people.ubuntu.com/~ubuntu-security/cve/CVE-2016-6132): read out-of-bands was found in the parsing of TGA files using libgd\n- [CVE-2016-6207](http://people.ubuntu.com/~ubuntu-security/cve/CVE-2016-6207): OOB or OOM in gdImageScale\n- [CVE-2016-6214](http://people.ubuntu.com/~ubuntu-security/cve/CVE-2016-6214): read out-of-bounds issue\n\n#### [1.73.0](https://github.com/cloudfoundry/stacks/releases/tag/1.73.0)\n\n[USN-3048-1: curl vulnerabilities](http://www.ubuntu.com/usn/usn-3048-1/) Ubuntu Security Notice USN-3048-1:\n- [CVE-2016-5419](http://people.ubuntu.com/~ubuntu-security/cve/CVE-2016-5419): TLS session resumption client cert bypass\n- [CVE-2016-5420](http://people.ubuntu.com/~ubuntu-security/cve/CVE-2016-5420): Re-using connections with wrong client cert\n- [CVE-2016-5421](http://people.ubuntu.com/~ubuntu-security/cve/CVE-2016-5421): use of connection struct after free\n\n### python-buildpack\n\nupdated to v1.5.9 (from v1.5.8)\n\n#### [v1.5.9](https://github.com/cloudfoundry/python-buildpack/releases/tag/v1.5.9)\n\nHighlights:\n- Add credential filtering for printed urls\n  (https://www.pivotaltracker.com/n/projects/1042066/stories/126514693)\n- Add default_versions support for specifying python default version\n  (https://www.pivotaltracker.com/n/projects/1042066/stories/126394947)\n\nDefault binary versions: python 2.7.12\n\n### ruby-buildpack\n\nupdated to v1.6.21 (from v1.6.20)\n\n#### [v1.6.21](https://github.com/cloudfoundry/ruby-buildpack/releases/tag/v1.6.21)\n\nHighlights:\n- Redact credentials from URLs in a cached buildpack's output\n  (https://www.pivotaltracker.com/story/show/127357631)\n- Redact credentials from URLs in an uncached buildpack's output\n  (https://www.pivotaltracker.com/story/show/126514693)\n- Add default_versions support to buildpack\n  (https://www.pivotaltracker.com/story/show/126394819)\n\nDefault binary versions: ruby 2.3.1, node 4.4.7\n\n## \u003ca name='dea-warden-hm9000-runtime'\u003e\u003c/a\u003eDEA-Warden-HM9000 Runtime\n- Create cgroups after rebooting a DEA VM [details](https://www.pivotaltracker.com/story/show/128884823)\n- Fix DEA template to properly respect enable_ssl [details](https://www.pivotaltracker.com/story/show/128856925)\n- Retry staging if the DEA is evacuating or shutting down [details](https://www.pivotaltracker.com/story/show/126497229)\n- Fix memory leak on failed downloads [details](https://www.pivotaltracker.com/story/show/122195891)\n- Starting only occurs after staging is marked successful [details](https://www.pivotaltracker.com/story/show/126880765)\n- DEA waits for staging tasks to complete before shutting down [details](https://www.pivotaltracker.com/story/show/126536049)\n- Ruby is updated to 2.3.1\n- NATS clients have been updated\n- direct team email: runtime-og@cloudfoundry.org\n- CF Dev mailing list: https://lists.cloudfoundry.org/archives/list/cf-dev@lists.cloudfoundry.org/\n- Slack channel: https://cloudfoundry.slack.com/messages/runtime_og/\n- GitHub issues: https://github.com/cloudfoundry/dea-hm-workspace/issues\n\n## \u003ca name='internal-components'\u003e\u003c/a\u003eInternal Components\n\n#### `postgres-release` (includes `postgres` job)\n- Bumped to [v5](https://github.com/cloudfoundry/postgres-release/releases/tag/v5). Functional changes:\n  - Bumped from `postgres-9.4.6` package to `postgres-9.4.9`. **NOTE: this drops support for upgrading from PostgreSQL 9.4.2**. [details](https://pivotaltracker.com/story/show/128248715)\n\n#### `etcd-release` (includes `etcd` and `etcd_metrics_server` jobs)\n- Bumped from v63 to [v66](https://github.com/cloudfoundry-incubator/etcd-release/releases/tag/v66). Functional changes:\n  - Removed all `/varz` support from `etcd_metrics_server`. [details](https://pivotaltracker.com/story/show/120643749)\n\n#### `consul-release` (includes `consul_agent` job)\n- Bumped from v101 to [v108](https://github.com/cloudfoundry-incubator/consul-release/releases/tag/v108). Functional changes:\n  - Fixed `consul_agent` in client mode to use ephemeral disk instead of possibly-non-existent persistent disk for storing data such as gossip keyring data, avoiding issues such as having no space left on the root volume device. [details](https://www.pivotaltracker.com/story/show/126901423)\n  - Added support for passing `max_stale` and `allow_stale` DNS config options through to Consul. [details](https://www.pivotaltracker.com/story/show/127404747)\n\n#### `nats-release` (includes `nats` and `nats_stream_forwarder` jobs)\n- Bumped to [v8](https://github.com/cloudfoundry/nats-release/releases/tags/v8). Functional changes:\n  - Bumped `gnatsd` dependency to v0.8.1. [details](https://pivotaltracker.com/story/show/125936521)\n  - Minor fixes to log directory setup on job start scripts. [details](https://www.pivotaltracker.com/story/show/127387055)\n\n## \u003ca name='recommended-versions-additional-releases'\u003e\u003c/a\u003eRecommended Versions of Additional Releases\n\nThese versions are soft recommendations, as several different versions of these releases may work correctly with this version of cf-release.\n- Diego release [v0.1483.0](https://github.com/cloudfoundry/diego-release/tree/v0.1483.0).\n  Release notes for\n  [v0.1483.0](https://github.com/cloudfoundry/diego-release/releases/tag/v0.1483.0) ·\n  [v0.1482.0](https://github.com/cloudfoundry/diego-release/releases/tag/v0.1482.0).\n- Garden-Linux release [v0.342.0](https://github.com/cloudfoundry/garden-linux-release/tree/v0.342.0).\n  Release notes for\n  [v0.342.0](https://github.com/cloudfoundry/garden-linux-release/releases/tag/v0.342.0) ·\n  [v0.341.0](https://github.com/cloudfoundry/garden-linux-release/releases/tag/v0.341.0) ·\n  [v0.340.0](https://github.com/cloudfoundry/garden-linux-release/releases/tag/v0.340.0).\n- etcd release [v66](https://github.com/cloudfoundry-incubator/etcd-release/tree/v66). Release notes for\n  [v66](https://github.com/cloudfoundry-incubator/etcd-release/releases/tag/v66) ·\n  [v65](https://github.com/cloudfoundry-incubator/etcd-release/releases/tag/v65) ·\n  [v64](https://github.com/cloudfoundry-incubator/etcd-release/releases/tag/v64).\n- cflinuxfs2-rootfs release [v1.27.0](https://github.com/cloudfoundry/cflinuxfs2-rootfs-release/tree/v1.27.0).\n  Release notes for\n  [v1.27.0](https://github.com/cloudfoundry/cflinuxfs2-rootfs-release/releases/tag/v1.27.0) ·\n  [v1.26.0](https://github.com/cloudfoundry/cflinuxfs2-rootfs-release/releases/tag/v1.26.0) ·\n  [v1.25.0](https://github.com/cloudfoundry/cflinuxfs2-rootfs-release/releases/tag/v1.25.0) ·\n  [v1.24.0](https://github.com/cloudfoundry/cflinuxfs2-rootfs-release/releases/tag/v1.24.0) ·\n  [v1.23.0](https://github.com/cloudfoundry/cflinuxfs2-rootfs-release/releases/tag/v1.23.0) ·\n  [v1.22.0](https://github.com/cloudfoundry/cflinuxfs2-rootfs-release/releases/tag/v1.22.0).\n\n## \u003ca name='job-spec-changes'\u003e\u003c/a\u003eJob Spec Changes\n- Removed `etcd_metrics_server.nats.password`, `etcd_metrics_server.nats.username`, `etcd_metrics_server.nats.port`, and `etcd_metrics_server.nats.machines` properties from `etcd_metrics_server` job. [details](https://pivotaltracker.com/story/show/120643749)\n\n## \u003ca name='recommended-bosh-stemcell-versions'\u003e\u003c/a\u003eRecommended BOSH Stemcell Versions\n- real IaaS: 3262.8\n- BOSH-Lite: 3262.2\n\nNote: For AWS you should use the [Xen-HVM](http://bosh.io/stemcells/bosh-aws-xen-hvm-ubuntu-trusty-go_agent) stemcells rather than Xen.\n\nThese are soft recommendations; several different versions of the stemcells are likely to work fine with this version of cf-release and the corresponding versions of the additional releases listed above.\n"
}