{
  "Content": "The cf-release v231 was released on February 23, 2016.\n\n**Important:**\n- There are new property names for doppler and metron manifests that **must** be updated or Loggregator deployments will fail.\n- Buildpacks (except for Java) have been extracted as their own releases, but submoduled back into cf-release with symlinks for the jobs and packages to eliminate impact on the current workflow of deploying the platform from a monolithic `cf-release`. You **do not** need to manually build and upload an additional set of releases (unless you want to). These buildpacks are no longer package dependencies of Cloud Controller, rather they are (no-op) jobs that are colocated with the Cloud Controller. To have an uninterrupted experience, you will need to colocate the new buildpack templates with the `cloud_controller_ng` template and update the `package` references in the `cc.buildpacks` property; see [this mailing list thread](https://lists.cloudfoundry.org/archives/list/cf-dev@lists.cloudfoundry.org/thread/QEQYZWBJA72W36T6ERTTRIQA5RK7BD3I/#QEQYZWBJA72W36T6ERTTRIQA5RK7BD3I) for some further discussion. If you are using the \"spiff\" manifest generation tooling, and are not overriding the `api_templates` then you will get this change for free.\n- If using the DEA backend, the `dea_next` and `hm9000` jobs should be colocated with a `consul_agent` job as they now rely on Consul for internal service discovery, including downloading blob assets from the CC via internal DNS.  For this case, `cloud_controller_ng` jobs must also be colocated with the `consul_agent` job, and register the appropriate service.  It is strongly advised that any job colocated with `consul_agent` should have `consul_agent` first in the templates list.  (Note, the \"spiff\"-based manifest generation tooling provided in this repo is missing this configuration in the case of OpenStack).\n- This releases introduces a new `blobstore` job using the webdav protocol instead of nfs. Several manifest changes required if currently using the nfs job. See job spec changes below\n- v231 contains a performance regression in Gorouter introduced in v228. At low request volume, the issue is not observable; only at higher request volumes (such as a load test) is the regression evident. The regression was fixed in v234. \n\n**Contents:**\n- \u003ca href='#cc-and-service-broker-apis'\u003eCC and Service Broker APIs\u003c/a\u003e\n- \u003ca href='#runtime'\u003eRuntime\u003c/a\u003e\n- \u003ca href='#buildpacks-and-stacks'\u003eBuildpacks and Stacks\u003c/a\u003e\n- \u003ca href='#identity'\u003eIdentity\u003c/a\u003e\n- \u003ca href='#routing'\u003eRouting\u003c/a\u003e\n- \u003ca href='#loggregator'\u003eLoggregator\u003c/a\u003e\n- \u003ca href='#internal-components'\u003eInternal Components\u003c/a\u003e\n- \u003ca href='#job-spec-changes'\u003eJob Spec Changes\u003c/a\u003e\n- \u003ca href='#recommended-bosh-stemcell-versions'\u003eRecommended BOSH Stemcell Versions\u003c/a\u003e\n- \u003ca href='#recommended-diego-release-version'\u003eRecommended diego-release Version\u003c/a\u003e\n- \u003ca href='#recommended-garden-linux-release-version'\u003eRecommended garden-linux-release Version\u003c/a\u003e\n- \u003ca href='#recommended-etcd-release-version'\u003eRecommended etcd-release Version\u003c/a\u003e\n\n## \u003ca name='cc-and-service-broker-apis'\u003e\u003c/a\u003eCC and Service Broker APIs\n\n**CC API Version: [2.51.0](http://apidocs.cloudfoundry.org/231)** \n\n**Service Broker API Version: [2.8](http://docs.cloudfoundry.org/services/api.html)**\n\n**IMPORTANT**: Manifest changes required for all deployments, whether using nfs or other blobstore.\n- Doc describing required manifest changes.  [details](https://docs.google.com/document/d/1PDswakRCBdnQEbJYZa01Fo8vo3DC6h3rtP3sckcp5Eo/edit#heading=h.oi6irfqgers2)\n\n#### [Cloud Controller](https://github.com/cloudfoundry/cloud_controller_ng/tree/b7cf099f39c547f79ce3191841e66a72b3b503de)\n- [Experimental] Work continues on /v3 and Application Process Types [details](https://www.pivotaltracker.com/epic/show/1334418)\n- [Experimental] Work continues on Tasks [details](https://www.pivotaltracker.com/epic/show/2205074)\n- Add docs for using the USR1 trap for diagnostics [details](https://www.pivotaltracker.com/story/show/103119628)\n- Update rails to 4.2.5.1 [details](https://www.pivotaltracker.com/story/show/112543827)\n- Added support for webdav protocol [details](https://www.pivotaltracker.com/story/show/109604284)\n  - This addition is considered experimental currently. Additional work to simplify the deployment and secure one part of the connection is in progress.\n- Remove incorrectly documented query param - organization_guid on /v2/apps/:guid/routes [details](https://www.pivotaltracker.com/story/show/112612819)\n- Fixed cloudfoundry/cloud_controller_ng #524: \"/v2/apps/:guid/summary\" will return duplicated \"name\" keys in JSON response [details](https://www.pivotaltracker.com/story/show/112428859)\n- cloudfoundry/cloud_controller_ng #522: Set TMPDIR for local worker [details](https://www.pivotaltracker.com/story/show/112387205)\n- Generate seed values for default environment variable groups [details](https://www.pivotaltracker.com/story/show/112096603)\n- Check for basic auth against clients that properly follow URI encoding - continue to support dea backend, which does not properly follow the conventions [details](https://www.pivotaltracker.com/story/show/112847097)\n- Remove organization_guid from listing all app routes docs [details](https://www.pivotaltracker.com/story/show/111893065)\n- Fixed cloudfoundry/cloud_controller_ng #528: Apps in space summary do not contain route paths [details](https://www.pivotaltracker.com/story/show/112898403)\n- Can toggle private service broker creation with a feature flag [details](https://www.pivotaltracker.com/story/show/113811041)\n  - `cf enable-feature-flag space_scoped_private_broker_creation`\n  - `cf disable-feature-flag space_scoped_private_broker_creation`\n- Fixed cloudfoundry/cloud_controller_ng #508: List Service Instance for a Service Plan documents invalid query parameter [details](https://www.pivotaltracker.com/story/show/112102523)\n- Fixed cloudfoundry/cloud_controller_ng #509: List Service Instance for a Service Plan documents invalid query parameter (2) [details](https://www.pivotaltracker.com/story/show/112102863)\n- Fixed cloudfoundry/cloud_controller_ng #499: Get Space Summary does not document last_operation parameter type [details](https://www.pivotaltracker.com/story/show/111810436)\n- Fixed cloudfoundry/cloud_controller_ng #511: Get the instance information for a STARTED App does not document field [details](https://www.pivotaltracker.com/story/show/112256019)\n  - Documents DEA/Diego responses\n- Fixed cloudfoundry/cloud_controller_ng #536: Delete Service does not document response payload [details](https://www.pivotaltracker.com/story/show/113578111)\n- [cf-dev] Update apidocs for space quota and org quota to indicate unlimited values for total_routes and total_services [details](https://www.pivotaltracker.com/story/show/113940931)\n\n## \u003ca name='runtime'\u003e\u003c/a\u003eRuntime\n\nNo changes.\n\n## \u003ca name='buildpacks-and-stacks'\u003e\u003c/a\u003eBuildpacks and Stacks\n\n### stacks\n\nupdated to 1.36.0 (from 1.31.0)\n\n#### [1.36.0](https://github.com/cloudfoundry/stacks/releases/tag/1.36.0)\n\nNotably, this release addresses [USN-2902-1](http://www.ubuntu.com/usn/usn-2902-1) \"graphite2 vulnerabilities\":\n- [CVE-2016-1521](http://people.canonical.com/~ubuntu-security/cve/2016/CVE-2016-1521.html): An exploitable out-of-bounds read vulnerability exists in the opcode handling functionality of Libgraphite. A specially crafted font can cause an out-of-bounds read resulting in arbitrary code execution. An attacker can provide a malicious font to trigger this vulnerability.\n- [CVE-2016-1522](http://people.canonical.com/~ubuntu-security/cve/2016/CVE-2016-1522.html): An exploitable out-of-bounds access vulnerability exists in the bidirectional font handling functionality of Libgraphite. A specially crafted font can cause an out-of-bounds access resulting in arbitrary code execution. An attacker can provide a malicious font to trigger\n  this vulnerability.\n- [CVE-2016-1523](http://people.canonical.com/~ubuntu-security/cve/2016/CVE-2016-1523.html): An exploitable heap-based buffer overflow exists in the context item handling functionality of Libgraphite. A specially crafted font can cause a buffer overflow resulting in potential code execution. An attacker can provide a malicious font to trigger this vulnerability.\n- [CVE-2016-1526](http://people.canonical.com/~ubuntu-security/cve/2016/CVE-2016-1526.html): No description provided\n\n#### [1.35.0](https://github.com/cloudfoundry/stacks/releases/tag/1.35.0)\n\nNotably, this release addresses [USN-2900-1](http://www.ubuntu.com/usn/usn-2900-1/) \"GNU C Library vulnerability\":\n- [CVE-2015-7547](http://people.canonical.com/~ubuntu-security/cve/2015/CVE-2015-7547.html): GNU C Library could be made to crash or run programs if it received specially crafted network traffic. \n\n#### [1.34.0](https://github.com/cloudfoundry/stacks/releases/tag/1.34.0)\n\nNotably, this release addresses [USN-2897-1](http://www.ubuntu.com/usn/usn-2897-1/) \"Nettle vulnerabilities\" and [USN-2896-1](http://www.ubuntu.com/usn/usn-2896-1/) \"Libgcrypt vulnerability\":\n- [CVE-2015-8803](http://people.canonical.com/~ubuntu-security/cve/2015/CVE-2015-8803.html): secp256 calculation bug\n- [CVE-2015-8804](http://people.canonical.com/~ubuntu-security/cve/2015/CVE-2015-8804.html): Miscalculations on secp384 curve\n- [CVE-2015-8805](http://people.canonical.com/~ubuntu-security/cve/2015/CVE-2015-8805.html): miscomputation bugs in secp-256r1 modulo functions\n- [CVE-2015-7511](http://people.canonical.com/~ubuntu-security/cve/2015/CVE-2015-7511.html): ECDH Key-Extraction via Low-Bandwidth Electromagnetic Attacks on PCs\n\n#### [1.33.0](https://github.com/cloudfoundry/stacks/releases/tag/1.33.0)\n\nThis release contains only non-critical updates to the rootfs. See the receipt changes at this [commit](https://github.com/cloudfoundry/stacks/commit/73f08c94737da4627c4e21f0190687749ab8e84e) for more information.\n\n#### [1.32.0](https://github.com/cloudfoundry/stacks/releases/tag/1.32.0)\n\nNotably, this release addresses [USN-2882-1](http://www.ubuntu.com/usn/usn-2882-1/) \"curl vulnerability\":\n- [CVE-2016-0755](http://people.canonical.com/~ubuntu-security/cve/2016/CVE-2016-0755.html): NTLM credentials not-checked for proxy connection re-use\n\n### java-buildpack\n\nupdated to v3.6 (from v3.5.1)\n\n#### [v3.6](https://github.com/cloudfoundry/java-buildpack/releases/tag/v3.6)\n\nI'm pleased to announce the release of the `java-buildpack`, version `3.6`. This release contains improvements to the Luna HA and GemFire support and updates to the dependencies.\n\nFor a more detailed look at the changes in `3.6`, please take a look at the [commit log](https://github.com/cloudfoundry/java-buildpack/compare/v3.5.1...v3.6). Packaged versions of the buildpack, suitable for use with `create-buildpack` and `update-buildpack`, can be found attached to this release.\n\n## Packaged Dependencies\n\n| Dependency | Version |\n| --- | --- |\n| AppDynamics Agent | `4.1.8_5` |\n| GemFire | `8.2.0` |\n| GemFire Modules | `8.2.0` |\n| GemFire Modules Tomcat7 | `8.2.0` |\n| GemFire Security | `8.2.0` |\n| Groovy | `2.4.5` |\n| JRebel | `6.3.2` |\n| Log4j API | `2.1.0` |\n| Log4j Core | `2.1.0` |\n| Log4j Jcl | `2.1.0` |\n| Log4j Jul | `2.1.0` |\n| Log4j Slf4j | `2.1.0` |\n| MariaDB JDBC | `1.3.4` |\n| Memory Calculator (`mountainlion`) | `2.0.1.RELEASE` |\n| Memory Calculator (`precise`) | `2.0.1.RELEASE` |\n| Memory Calculator (`trusty`) | `2.0.1.RELEASE` |\n| New Relic Agent | `3.25.0` |\n| OpenJDK JRE (`mountainlion`) | `1.8.0_71` |\n| OpenJDK JRE (`precise`) | `1.8.0_71` |\n| OpenJDK JRE (`trusty`) | `1.8.0_71` |\n| Play Framework JPA Plugin | `1.10.0.RELEASE` |\n| PostgreSQL JDBC | `9.4.1207` |\n| RedisStore | `1.2.0_RELEASE` |\n| SLF4J API | `1.7.7` |\n| SLF4J JDK14 | `1.7.7` |\n| Spring Auto-reconfiguration | `1.10.0_RELEASE` |\n| Spring Boot CLI | `1.3.2_RELEASE` |\n| Tomcat Access Logging Support | `2.5.0_RELEASE` |\n| Tomcat Lifecycle Support | `2.5.0_RELEASE` |\n| Tomcat Logging Support | `2.5.0_RELEASE` |\n| Tomcat | `8.30.0` |\n| YourKit Profiler | `2015.15086.0` |\n\n### php-buildpack\n\nupdated to v4.3.5 (from v4.3.3)\n\n#### [v4.3.5](https://github.com/cloudfoundry/php-buildpack/releases/tag/v4.3.5)\n- Remove HHVM from PHP Buildpack\n  (https://www.pivotaltracker.com/story/show/113172267)\n- Moving intl from pecl package to compile-time option\n  (https://www.pivotaltracker.com/story/show/109840204)\n- Add composer-1.0.0-alpha11\n  (https://www.pivotaltracker.com/story/show/112362115)\n- add php 5.5.32, 5.6.18, 7.0.3, drop 5.5.30, 5.6.16\n  (https://www.pivotaltracker.com/story/show/112908255)\n\nPackaged binaries:\n\n| name | version | cf_stacks | modules |\n| --- | --- | --- | --- |\n| php | 5.5.31 | cflinuxfs2 | amqp, bz2, curl, dba, exif, fileinfo, ftp, gd, gettext, gmp, igbinary, imagick, imap, intl, ioncube, ldap, lua, mailparse, mbstring, mcrypt, memcache, memcached, mongo, msgpack, mysql, mysqli, opcache, openssl, pcntl, pdo, pdo_mysql, pdo_pgsql, pdo_sqlite, pgsql, phalcon, phpiredis, protobuf, protocolbuffers, pspell, readline, redis, snmp, soap, sockets, suhosin, sundown, twig, xcache, xdebug, xhprof, xsl, yaf, zip, zlib |\n| php | 5.5.32 | cflinuxfs2 | amqp, bz2, curl, dba, exif, fileinfo, ftp, gd, gettext, gmp, igbinary, imagick, imap, intl, ioncube, ldap, lua, mailparse, mbstring, mcrypt, memcache, memcached, mongo, msgpack, mysql, mysqli, opcache, openssl, pcntl, pdo, pdo_mysql, pdo_pgsql, pdo_sqlite, pgsql, phalcon, phpiredis, protobuf, protocolbuffers, pspell, readline, redis, snmp, soap, sockets, suhosin, sundown, twig, xcache, xdebug, xhprof, xsl, yaf, zip, zlib |\n| php | 5.6.17 | cflinuxfs2 | amqp, bz2, curl, dba, exif, fileinfo, ftp, gd, gettext, gmp, igbinary, imagick, imap, intl, ioncube, ldap, lua, mailparse, mbstring, mcrypt, memcache, memcached, mongo, msgpack, mysql, mysqli, opcache, openssl, pcntl, pdo, pdo_mysql, pdo_pgsql, pdo_sqlite, pgsql, phalcon, phpiredis, protobuf, protocolbuffers, pspell, readline, redis, snmp, soap, sockets, suhosin, sundown, twig, xcache, xdebug, xhprof, xsl, yaf, zip, zlib |\n| php | 5.6.18 | cflinuxfs2 | amqp, bz2, curl, dba, exif, fileinfo, ftp, gd, gettext, gmp, igbinary, imagick, imap, intl, ioncube, ldap, lua, mailparse, mbstring, mcrypt, memcache, memcached, mongo, msgpack, mysql, mysqli, opcache, openssl, pcntl, pdo, pdo_mysql, pdo_pgsql, pdo_sqlite, pgsql, phalcon, phpiredis, protobuf, protocolbuffers, pspell, readline, redis, snmp, soap, sockets, suhosin, sundown, twig, xcache, xdebug, xhprof, xsl, yaf, zip, zlib |\n| php | 7.0.3 | cflinuxfs2 | bz2, curl, dba, exif, fileinfo, ftp, gd, gettext, gmp, imap, ldap, lua, mailparse, mbstring, mcrypt, mongodb, msgpack, mysqli, opcache, openssl, pcntl, pdo, pdo_mysql, pdo_pgsql, pdo_sqlite, pgsql, pspell, snmp, soap, sockets, xsl, yaf, zip, zlib |\n| composer | 1.0.0-alpha11 | cflinuxfs2 |  |\n| httpd | 2.4.18 | cflinuxfs2 |  |\n| newrelic | 4.23.3.111 | cflinuxfs2 |  |\n| nginx | 1.8.1 | cflinuxfs2 |  |\n| nginx | 1.9.10 | cflinuxfs2 |  |\n- SHA256: 3c8508491196427ef3752469dae6e674e4f15d944aa7a9d897d4eca949ab6cef\n\n#### [v4.3.4](https://github.com/cloudfoundry/php-buildpack/releases/tag/v4.3.4)\n- Add nginx 1.8.1 and 1.9.10, drop nginx 1.8.0 and 1.9.9\n  (https://www.pivotaltracker.com/story/show/112525507)\n  \n  Note that nginx 1.9.10 is a security update for the [following CVEs](http://mailman.nginx.org/pipermail/nginx-announce/2016/000169.html?_ga=1.134019406.1734013177.1444677334):\n  - CVE-2016-0742\n  - CVE-2016-0746\n  - CVE-2016-0747\n\nPackaged binaries:\n\n| name | version | cf_stacks | modules |\n| --- | --- | --- | --- |\n| php | 5.5.30 | cflinuxfs2 | amqp, bz2, curl, dba, exif, fileinfo, ftp, gd, gettext, gmp, igbinary, imagick, imap, intl, ioncube, ldap, lua, mailparse, mbstring, mcrypt, memcache, memcached, mongo, msgpack, mysql, mysqli, opcache, openssl, pcntl, pdo, pdo_mysql, pdo_pgsql, pdo_sqlite, pgsql, phalcon, phpiredis, protobuf, protocolbuffers, pspell, readline, redis, snmp, soap, sockets, suhosin, sundown, twig, xcache, xdebug, xhprof, xsl, yaf, zip, zlib |\n| php | 5.5.31 | cflinuxfs2 | amqp, bz2, curl, dba, exif, fileinfo, ftp, gd, gettext, gmp, igbinary, imagick, imap, intl, ioncube, ldap, lua, mailparse, mbstring, mcrypt, memcache, memcached, mongo, msgpack, mysql, mysqli, opcache, openssl, pcntl, pdo, pdo_mysql, pdo_pgsql, pdo_sqlite, pgsql, phalcon, phpiredis, protobuf, protocolbuffers, pspell, readline, redis, snmp, soap, sockets, suhosin, sundown, twig, xcache, xdebug, xhprof, xsl, yaf, zip, zlib |\n| php | 5.6.16 | cflinuxfs2 | amqp, bz2, curl, dba, exif, fileinfo, ftp, gd, gettext, gmp, igbinary, imagick, imap, intl, ioncube, ldap, lua, mailparse, mbstring, mcrypt, memcache, memcached, mongo, msgpack, mysql, mysqli, opcache, openssl, pcntl, pdo, pdo_mysql, pdo_pgsql, pdo_sqlite, pgsql, phalcon, phpiredis, protobuf, protocolbuffers, pspell, readline, redis, snmp, soap, sockets, suhosin, sundown, twig, xcache, xdebug, xhprof, xsl, yaf, zip, zlib |\n| php | 5.6.17 | cflinuxfs2 | amqp, bz2, curl, dba, exif, fileinfo, ftp, gd, gettext, gmp, igbinary, imagick, imap, intl, ioncube, ldap, lua, mailparse, mbstring, mcrypt, memcache, memcached, mongo, msgpack, mysql, mysqli, opcache, openssl, pcntl, pdo, pdo_mysql, pdo_pgsql, pdo_sqlite, pgsql, phalcon, phpiredis, protobuf, protocolbuffers, pspell, readline, redis, snmp, soap, sockets, suhosin, sundown, twig, xcache, xdebug, xhprof, xsl, yaf, zip, zlib |\n| hhvm | 3.5.0 | cflinuxfs2 |  |\n| hhvm | 3.5.1 | cflinuxfs2 |  |\n| hhvm | 3.6.0 | cflinuxfs2 |  |\n| hhvm | 3.6.1 | cflinuxfs2 |  |\n| composer | 1.0.0-alpha10 | cflinuxfs2 |  |\n| httpd | 2.4.18 | cflinuxfs2 |  |\n| newrelic | 4.23.3.111 | cflinuxfs2 |  |\n| nginx | 1.8.1 | cflinuxfs2 |  |\n| nginx | 1.9.10 | cflinuxfs2 |  |\n- SHA256: 3c2ce68641fc0eae64c26669fbf2f765797aea7713d8f20eb768a566778144e4\n\n### ruby-buildpack\n\nupdated to v1.6.13 (from v1.6.12)\n\n#### [v1.6.13](https://github.com/cloudfoundry/ruby-buildpack/releases/tag/v1.6.13)\n- Addressed the following vulnerability: [CVE-2016-0603](http://www.oracle.com/technetwork/topics/security/alert-cve-2016-0603-2874360.html)\n- Update jruby to 1.7.24 and 9.0.5.0, dropped 1.7.23 and 9.0.4.0\n  (https://www.pivotaltracker.com/story/show/112073931)\n  (https://www.pivotaltracker.com/story/show/112523589)\n- Update openjdk to 1.8.0_73, dropped 1.8.0_65\n  (https://www.pivotaltracker.com/story/show/113292605)\n- Change default ruby to 2.2.4\n- Instruct curl to follow redirects.\n\nPackaged binaries:\n\n| name | version | cf_stacks |\n| --- | --- | --- |\n| ruby | 2.0.0 | cflinuxfs2 |\n| ruby | 2.1.7 | cflinuxfs2 |\n| ruby | 2.1.8 | cflinuxfs2 |\n| ruby | 2.2.3 | cflinuxfs2 |\n| ruby | 2.2.4 | cflinuxfs2 |\n| ruby | 2.3.0 | cflinuxfs2 |\n| jruby | ruby-1.9.3-jruby-1.7.24 | cflinuxfs2 |\n| jruby | ruby-2.0.0-jruby-1.7.24 | cflinuxfs2 |\n| jruby | ruby-2.2.3-jruby-9.0.5.0 | cflinuxfs2 |\n| node | 0.12.7 | cflinuxfs2 |\n| bundler | 1.9.7 | cflinuxfs2 |\n| libyaml | 0.1.6 | cflinuxfs2 |\n| openjdk1.8-latest | 1.8.0_73 | cflinuxfs2 |\n| rails3_serve_static_assets | - | cflinuxfs2 |\n| rails_log_stdout | - | cflinuxfs2 |\n- SHA256: f64614ae377962af83262f7328f818a6612c01f0e43367bfa60fee354eb6f6c4\n\n### staticfile-buildpack\n\nupdated to v1.3.1 (from v1.3.0)\n\n#### [v1.3.1](https://github.com/cloudfoundry/staticfile-buildpack/releases/tag/v1.3.1)\n- Update nginx from 1.9.9 to 1.9.10\n  (https://www.pivotaltracker.com/story/show/112526103)\n  \n  Note that nginx 1.9.10 is a security update for the [following CVEs](http://mailman.nginx.org/pipermail/nginx-announce/2016/000169.html?_ga=1.134019406.1734013177.1444677334):\n  - CVE-2016-0742\n  - CVE-2016-0746\n  - CVE-2016-0747\n\nPackaged binaries:\n\n| name | version | cf_stacks |\n| --- | --- | --- |\n| nginx | 1.9.10 | cflinuxfs2 |\n- SHA256: 912f17732b79ca05ac1d58e305085cbf2ba31c320435c11df4ebce8fe11a7739\n\n## \u003ca name='identity'\u003e\u003c/a\u003eIdentity\n\nUpdated to UAA Release [3.1.0](https://github.com/cloudfoundry/uaa/releases/tag/3.1.0)\n\n## \u003ca name='routing'\u003e\u003c/a\u003eRouting\n\nRoute Paths\n- CC API no longer permits a route to be created from a shared domain if another route with the same hostname has been created in another space, regardless of the path [details](https://www.pivotaltracker.com/story/show/104038778)\n\nRoute Services\n- The scheme for the url to which route services should send requests after processing (x-cf-forwarded-url) defaults to https, but can be configured to http for dev environments [details](https://www.pivotaltracker.com/story/show/100982038)\n- Experimental label removed from CC API for Route Services [details](https://www.pivotaltracker.com/story/show/111475636)\n- X-Cf-Forwarded-Url header is no longer forwarded to apps when request came through a route service [details](https://www.pivotaltracker.com/story/show/112089431)\n\nGorouter Misc\n- A deploy of Gorouter now succeeds only after it is ready to accept any connections [details](https://www.pivotaltracker.com/story/show/111657734)\n- Gorouter no longer uses 8.8.8.8 for DNS to resolve internal hostname for UAA when consul agent isn't running. Instead Gorouter continues asking consul agent on localhost until it responds [details](https://www.pivotaltracker.com/story/show/113125989)\n- Gorouter metrics token_fetch_errors and subscribe_events_errors are now emitted via firehose [details](https://www.pivotaltracker.com/story/show/109774972)\n- Improvements to Gorouter logging [details](https://www.pivotaltracker.com/story/show/113302115)\n- Gorouter exposes number of events received from route-emitter so that this can be compared with the number of events route-emitter sent [details](https://www.pivotaltracker.com/story/show/112189683)\n\nTCP Routing\n- Routing API is no longer deployed with cf-release to bosh-lite by default; it is being moved to cf-routing-release [details](https://www.pivotaltracker.com/story/show/113207577)\n- CC API now exposes router group type for shared domains [details](https://www.pivotaltracker.com/story/show/112854829)\n\nMultiple App Ports\n- CC API now enables clients to specify an app port when mapping an HTTP route to an app  [details](https://www.pivotaltracker.com/story/show/101453612)\n- CC API exposes app ports that routes are mapped to on new endpoint /v2/routing_mappings [details](https://www.pivotaltracker.com/story/show/101459442)\n- CC API supports deleting route mappings through the new endpoint /v2/route_mappings/:guid [details](https://www.pivotaltracker.com/story/show/109999532)\n- When deleting an app or route from CC API, associated route_mappings are also deleted [details](https://www.pivotaltracker.com/story/show/112640495)\n- When CC API is used to update an app, enabling diego and specifying multiple app ports, routes are mapped to the first app port in the list [details](https://www.pivotaltracker.com/story/show/109768484)\n- When CC API is used to update an app, disabling diego, app ports are no longer exposed for route mappings [details](https://www.pivotaltracker.com/story/show/108134016)\n\nAcceptance Tests\n- cloudfoundry/cf-acceptance-tests #87: some routing tests don't have code to print logs in AfterEach [details](https://www.pivotaltracker.com/story/show/113226335)\n- cloudfoundry/cf-acceptance-tests #86: routing suite doesn't do cleanup properly [details](https://www.pivotaltracker.com/story/show/113221077)\n- update cats to use cli for context path route coverage [details](https://www.pivotaltracker.com/story/show/106693894)\n\n## \u003ca name='loggregator'\u003e\u003c/a\u003eLoggregator\n- Loggregator is now available as a [separate release](https://github.com/cloudfoundry/loggregator/#loggregator-as-a-separate-release) which can be consumed by other BOSH deployments and emit logs and metrics to a CF Loggregator chain. This may be useful to services that wish to generate metrics and logs.\n- Doppler metrics added\n  - dopplerProxy.recentlogsLatency\n  - dopplerProxy.containermetricsLatency\n  - numberOfContainerMetricSinks \n\nBOSH property name change. **These are required**\ndoppler.tls_server.cert --\u003e doppler.tls.server_cert\ndoppler.tls_server.key --\u003e doppler.tls.server_key\ndoppler.tls_server.port --\u003e doppler.tls.port\ndoppler.enable_tls_transport --\u003e doppler.tls.enable\nmetron_agent.tls_client.key  --\u003e metron_agent.tls.client_key\nmetron_agent.tls_client.cert  --\u003e metron_agent.tls.client_cert\nloggregator.tls.ca --\u003e loggregator.tls.ca_cert\n\nDoppler and Traffic Controller no longer log ids and passwords that are passed in to their endpoints.\n\n## \u003ca name='internal-components'\u003e\u003c/a\u003eInternal Components\n\n#### consul\n- Fix regression where already-encoded encrypt keys were being double-encoded. [details](https://www.pivotaltracker.com/story/show/113130975)\n- Fix bug where consul process would be orphaned when the network interface was slow to come up. [details](https://www.pivotaltracker.com/story/show/112915865)\n- Agent checks for servers on startup in an IP-agnostic way to support infrastructures like GCE. [details](https://www.pivotaltracker.com/n/projects/1488988/stories/107269646), [original PR](https://github.com/cloudfoundry-incubator/consul-release/pull/5)\n- Numerous non-functional changes (refactors and test improvements)\n\n#### etcd\n\nNo changes.\n\n#### etcd-metrics-server\n\nNo changes.\n\n#### route_registrar\n- Handle interrupt signals instantly instead of blocking on healthchecks. [details](https://www.pivotaltracker.com/story/show/112073391)\n- Handle health checks asynchronously instead of blocking. [details](https://www.pivotaltracker.com/story/show/112073391)\n- Validate route registration configuration thoroughly. [details](https://www.pivotaltracker.com/story/show/112073737), [details](https://www.pivotaltracker.com/story/show/112361143), [details](https://www.pivotaltracker.com/story/show/107467058), [details](https://github.com/cloudfoundry-incubator/route-registrar/commit/514a6659ed42c0a185b91ed5c0a37a2369c17c6a)\n- Fix regression where tag stopped being included in route registration messages. [details](https://www.pivotaltracker.com/story/show/112614449)\n- Time intervals for route_registrar configuration now require units. [details](https://www.pivotaltracker.com/story/show/112714033)\n- Aggregate validation errors to give more complete feedback when misconfigured. [details](https://www.pivotaltracker.com/story/show/112359611)\n- Healthcheck timeout defaults to half the registration interval if not provided. [details](https://www.pivotaltracker.com/story/show/112073907)\n- Healthcheck script will be killed when they exceed the timeout. [details](https://www.pivotaltracker.com/story/show/112361087)\n\n## \u003ca name='job-spec-changes'\u003e\u003c/a\u003eJob Spec Changes\n- Added `dns_health_check_host` to `etcd` job with default `\"consul.service.cf.internal\"` (should not require overriding configuration). [details](https://www.pivotaltracker.com/story/show/111658564)\n- Removed `route_registrar.update_frequency_in_seconds` property from `route_registrar` job, and moved the configuration down to a per-route basis under the `route_registrar.routes` property. [details](https://www.pivotaltracker.com/story/show/113121375)\n- Made several changes to `route_registrar.routes` property in the `route_registrar` job to support health checking and timeouts. [details](https://github.com/cloudfoundry/cf-release/blob/v231/jobs/route_registrar/spec#L30-L66)\n- Several changes to UAA job spec. Please see [here](https://github.com/cloudfoundry/uaa-release/releases/tag/v6)\n\n**NFS to WebDav related changes** Please see this [doc](https://docs.google.com/document/d/1PDswakRCBdnQEbJYZa01Fo8vo3DC6h3rtP3sckcp5Eo/edit?usp=sharing) for more details and how to move to webdav without losing data from the existing nfs job\n- Added default value \"/var/vcap/nfs\" to `nfs_server.share_path` property in the `cloud_controller_ng`, `cloud_controller_worker`, and `cloud_controller_clock` jobs. [details](https://www.pivotaltracker.com/story/show/109604284)\n- Added `cc.resource_pool.blobstore_type` property with default value `fog` in the `cloud_controller_ng`, `cloud_controller_worker`, and `cloud_controller_clock` jobs. [details](https://www.pivotaltracker.com/story/show/109604284)\n- Added `cc.resource_pool.webdav_config.public_endpoint`, in the `cloud_controller_ng`, `cloud_controller_worker`, and `cloud_controller_clock` jobs. [details](https://www.pivotaltracker.com/story/show/109604284)\n- Added `cc.resource_pool.webdav_config.private_endpoint`, in the `cloud_controller_ng`, `cloud_controller_worker`, and `cloud_controller_clock` jobs. [details](https://www.pivotaltracker.com/story/show/109604284)\n- Added `cc.resource_pool.webdav_config.username`, `cc.resource_pool.webdav_config.password`, and `cc.packages.webdav_config.secret`  in the `cloud_controller_ng`, `cloud_controller_worker`, and `cloud_controller_clock` jobs. [details](https://www.pivotaltracker.com/story/show/109604284)\n- Added `cc.packages.blobstore_type` property with default value `fog` in the `cloud_controller_ng`, `cloud_controller_worker`, and `cloud_controller_clock` jobs. [details](https://www.pivotaltracker.com/story/show/109604284)\n- Added `cc.packages.webdav_config.public_endpoint`, in the `cloud_controller_ng`, `cloud_controller_worker`, and `cloud_controller_clock` jobs. [details](https://www.pivotaltracker.com/story/show/109604284)\n- Added `cc.packages.webdav_config.private_endpoint`, in the `cloud_controller_ng`, `cloud_controller_worker`, and `cloud_controller_clock` jobs. [details](https://www.pivotaltracker.com/story/show/109604284)\n- Added `cc.packages.webdav_config.username`, `cc.packages.webdav_config.password`, and `cc.packages.webdav_config.secret`  in the `cloud_controller_ng`, `cloud_controller_worker`, and `cloud_controller_clock` jobs. [details](https://www.pivotaltracker.com/story/show/109604284)\n- Added `cc.droplets.blobstore_type` property with default value `fog` in the `cloud_controller_ng`, `cloud_controller_worker`, and `cloud_controller_clock` jobs. [details](https://www.pivotaltracker.com/story/show/109604284)\n- Added `cc.droplets.webdav_config.public_endpoint`, in the `cloud_controller_ng`, `cloud_controller_worker`, and `cloud_controller_clock` jobs. [details](https://www.pivotaltracker.com/story/show/109604284)\n- Added `cc.droplets.webdav_config.private_endpoint`, in the `cloud_controller_ng`, `cloud_controller_worker`, and `cloud_controller_clock` jobs. [details](https://www.pivotaltracker.com/story/show/109604284)\n- Added `cc.droplets.webdav_config.username`, `cc.droplets.webdav_config.password`, and `cc.droplets.webdav_config.secret`  in the `cloud_controller_ng`, `cloud_controller_worker`, and `cloud_controller_clock` jobs. [details](https://www.pivotaltracker.com/story/show/109604284)\n- Added `cc.buildpacks.blobstore_type` property with default value `fog` in the `cloud_controller_ng`, `cloud_controller_worker`, and `cloud_controller_clock` jobs. [details](https://www.pivotaltracker.com/story/show/109604284)\n- Added `cc.buildpacks.webdav_config.public_endpoint`, in the `cloud_controller_ng`, `cloud_controller_worker`, and `cloud_controller_clock` jobs. [details](https://www.pivotaltracker.com/story/show/109604284)\n- Added `cc.buildpacks.webdav_config.private_endpoint`, in the `cloud_controller_ng`, `cloud_controller_worker`, and `cloud_controller_clock` jobs. [details](https://www.pivotaltracker.com/story/show/109604284)\n- Added `cc.buildpacks.webdav_config.username`, `cc.buildpacks.webdav_config.password`, and `cc.buildpacks.webdav_config.secret`  in the `cloud_controller_ng`, `cloud_controller_worker`, and `cloud_controller_clock` jobs. [details](https://www.pivotaltracker.com/story/show/109604284)\n- Added new blobstore job to replace nfs job\n  - Added `blobstore.port` in the `blobstore` job [details](https://www.pivotaltracker.com/story/show/109604284)\n  - Added `blobstore.admin_users` in the `blobstore` job [details](https://www.pivotaltracker.com/story/show/109604284)\n  - Added `blobstore.secure_link.secret` in the `blobstore` job [details](https://www.pivotaltracker.com/story/show/109604284)\n  - Added `blobstore.max_upload_size` in the `blobstore` job [details](https://www.pivotaltracker.com/story/show/109604284)\n  - Added `domain` in the `blobstore` job [details](https://www.pivotaltracker.com/story/show/109604284)\n\n## \u003ca name='recommended-bosh-stemcell-versions'\u003e\u003c/a\u003eRecommended BOSH Stemcell Versions\n- AWS: light-bosh-stemcell-3197-aws-xen-hvm-ubuntu-trusty-go_agent\n- vSphere: bosh-stemcell-3197-vsphere-esxi-ubuntu-trusty-go_agent\n- OpenStack: bosh-stemcell-3197-openstack-kvm-ubuntu-trusty-go_agent\n- BOSH-Lite: bosh-stemcell-3147-warden-boshlite-ubuntu-trusty-go_agent\n\nThese are soft recommendations; several different versions of the BOSH and stemcells are likely to work fine with this version of cf-release and the corresponding versions of diego-release, garden-linux-release, and etcd-release.\n\n## \u003ca name='recommended-diego-release-version'\u003e\u003c/a\u003eRecommended `diego-release` Version\n- Diego final release [v0.1454.0](https://github.com/cloudfoundry-incubator/diego-release/tree/v0.1454.0) · [release notes](https://github.com/cloudfoundry-incubator/diego-release/releases/tag/v0.1454.0)\n\nThis is a soft recommendation; several different versions of diego-release may work fine with this version of cf-release.\n\n## \u003ca name='recommended-garden-linux-release-version'\u003e\u003c/a\u003eRecommended `garden-linux-release` Version\n- Garden-linux final release [v0.333.0](https://github.com/cloudfoundry-incubator/garden-linux-release/tree/v0.333.0) · [release notes](https://github.com/cloudfoundry-incubator/garden-linux-release/releases/tag/v0.333.0)\n\nThis is a soft recommendation; several different versions of the garden-linux-release may work fine with this version of cf-release and the aforementioned version of diego-release.\n\n## \u003ca name='recommended-etcd-release-version'\u003e\u003c/a\u003eRecommended `etcd-release` Version\n- etcd final release [v36](https://github.com/cloudfoundry-incubator/etcd-release/releases/tag/v36)\n\nThis is a soft recommendation; several different versions of the etcd-release may work fine with this version of cf-release and the aforementioned version of diego-release.\n"
}