{
  "Content": "The cf-release v211 was released on June 4th, 2015\n- IMPORTANT: This release removes lucid64 stack, please ensure apps migrated prior to upgrade\n- IMPORTANT: If using the postgres included within cf-release, please carefully read the note below about postgres job upgrade\n\n### Runtime\n- Remove lucid64 stack completely from cf-release [details](https://www.pivotaltracker.com/story/show/95483678)\n  - Please ensure all your applications have migrated to the cflinuxfs2 stack prior to upgrading to this release\n  - Once all apps have been migrated to the new stack, Operators will need to manually delete the lucid64 stack via the cc api using the admin user.\n  - http://apidocs.cloudfoundry.org/211/stacks/delete_a_particular_stack.html\n- Upgraded postgres included in cf-release to postgres 9.4.2 [details](https://www.pivotaltracker.com/story/show/77680398)\n  - See note below about the postgres job upgrade\n- [Experimental] Work continues on /v3 and Application Process Types [details](https://www.pivotaltracker.com/epic/show/1334418)\n- [Experimental] Work continues on Route API [details](https://www.pivotaltracker.com/epic/show/1590160)\n- [Experimental] Work continues on Context Path Routes [details](https://www.pivotaltracker.com/epic/show/1808212)\n- Work in progress for support of user-provided tags on service instances [details](https://www.pivotaltracker.com/epic/show/1879702)\n- cloudfoundry/cf-release #689: Fixing failed cc_ng and cc_ng_worker with NFS [details](https://www.pivotaltracker.com/story/show/95602450)\n- Remove default support address for CC [details](https://www.pivotaltracker.com/story/show/92724640)\n- increased cloud_controller_ng start timeout to be able to run long ccdb migrations [details](https://github.com/cloudfoundry/cf-release/commit/ff57572d67c9c0e7e38d9b2298762faba8547727)\n- cloudfoundry/cf-release #680: staticfile to be tested before nodejs/ruby buildpacks [details](https://www.pivotaltracker.com/story/show/94594952)\n- cloudfoundry/stacks #16: Add `cmake` to rootfses [details](https://www.pivotaltracker.com/story/show/94022672)\n- cloudfoundry/stacks #17: Add autoconf to rootfs [details](https://www.pivotaltracker.com/story/show/94411176)\n- cloudfoundry/cf-release #682: Upgrading ruby buildpack to v1.4.2 [details](https://www.pivotaltracker.com/story/show/95087396)\n- cloudfoundry/cf-release #683: Upgrading python buildpack to v1.3.2 [details](https://www.pivotaltracker.com/story/show/95163484)\n- Make 'dea_next.stacks' overridable in the manifest. [details](https://www.pivotaltracker.com/story/show/92393276)\n- cloudfoundry/cf-release #681: Add security group for cf-mysql subnets on bosh-lite [details](https://www.pivotaltracker.com/story/show/95024316)\n- cloudfoundry/dea_ng #164: Add warden_handle method to staging task [details](https://www.pivotaltracker.com/story/show/95427526)\n- Use MASQUERADE instead of SNAT for container NAT [details](https://github.com/cloudfoundry/warden/commit/4f1e5c049a12199fdd1f29cde15c9a786bd5fac8)\n- Throw better errors for apps stats endpoint [details](https://www.pivotaltracker.com/story/show/93268820)\n- Fix buildpack_cache deletion issue [details](https://www.pivotaltracker.com/story/show/95474242)\n\n### Loggregator\n- If no Dopplers available in an AZ, Metron will now fail over across AZs.  [details](https://www.pivotaltracker.com/story/show/86649938)\n- StatsD support broken out of Metron and into a separate process.  New class of items for adding data into metron/loggregator now known as an â€œinjectors.\"  Further info to follow on cf-dev.\n  - [details](https://www.pivotaltracker.com/story/show/95065248).\n  - [repo](https://github.com/cloudfoundry/statsd-injector).\n- All loggregator metrics now using a Metron /varz shim instead of writing to a local /varz.\n  - Most loggregator metrics will have a different prefix as a result.\n  - All former metrics and new ones are documented - in [wiki](https://github.com/cloudfoundry/loggregator/wiki/Loggregator--varz-metrics-page) (scroll right) and in a public [google doc](https://docs.google.com/spreadsheets/d/176yIaJChXEmvm-CjybmwopdRGQfDGrSzo3J_Mx8mMnk/edit?usp=sharing).\n  - Story [details](https://www.pivotaltracker.com/story/show/95539818).\n  - Other CF Components to follow; docs to be formalized with documentation team.\n- NOAA client library fixed Close() issue, independent of CF release.  Change is backward-incompatible.\n  - [details](https://www.pivotaltracker.com/story/show/94103174) | [cf-dev announcement](http://lists.cloudfoundry.org/pipermail/cf-dev/2015-June/000316.html) | [github diff](https://github.com/cloudfoundry/noaa/commit/0de0770ca632948b6ae49ab28c1c04e260d31bbb)\n- Removed Dropsonde protocol dependence on gogoproto for non-go builds. [details](https://www.pivotaltracker.com/story/show/94688854)\n- Increase doppler marshal/unmarshal efficiency to compensate for message size changes. [details](https://www.pivotaltracker.com/story/show/93439456)\n- [Bug Fix] Syslog drain binder is no longer leaking connections to cloud_controller. [details](https://www.pivotaltracker.com/story/show/93932106)\n- [Bug Fix] LoggregatorClientPool no longer leaking clients to non-existant dopplers. [details](https://www.pivotaltracker.com/story/show/95008094)\n\n### Used Configuration\n- BOSH Version: 152\n- Stemcell Version: 2969\n- CC Api Version: 2.28.0\n\n[Commit summary](http://htmlpreview.github.io/?https://github.com/cloudfoundry-community/cf-docs-contrib/blob/master/release_notes/cf-211-whats-in-the-deploy.html)\n\n### Compatible Diego Version\n- final release 0.1281.0 [commit](https://github.com/cloudfoundry-incubator/diego-release/commit/fc114972868c3adc544f22860ef77593cb624e64)\n\n### Postgres Job Upgrade\n\nThe Postgres Job will upgrade the postgres database to version 9.4.2. Postgres will be unavailable during this upgrade.\n\nA copy of the database is made for the upgrade, you may need to adjust the persistent disk capacity of the postgres job.\n\nIf the upgrade fails:\n- The old database is still available at `/var/vcap/store/postgres`\n- The new database is at `/var/vcap/store/postgres-9.4.2`\n- A marker file is kept at /var/vcap/store/FLAG_POSTGRES_UPGRADE to prevent the upgrade from happening again.\n- `pg_upgrade` logs that may have details of why the migration failed can be found in `/home/vcap/`\n\nTo attempt the upgrade again, you should remove `/var/vcap/store/postgres-9.4.2` and `/var/vcap/store/FLAG_POSTGRES_UPGRADE`\n\nTo rollback to a previous release, you should remove `/var/vcap/store/postgres-9.4.2` and `/var/vcap/store/FLAG_POSTGRES_UPGRADE`. The previous release has no knowledge of these files, but they will conflict if you later try the upgrade again.\n\nPost upgrade, both old and new databases are kept. The old database moved to `/var/vcap/store/postgres-previous`. The `postgres-previous` directory will be kept until the next postgres upgrade is performed in the future. You are free to remove this if you have verified the new database works and you want to reclaim the space.\n\n### Manifest and Job Spec Changes\n- `properties.cc.stacks.default` lucid64 stack has been removed\n- `properties.dea_next.stacks.default` lucid64 stack has been removed\n"
}