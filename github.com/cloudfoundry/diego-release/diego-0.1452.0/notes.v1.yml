{
  "Content": "## Changes from v0.1451.0 to v0.1452.0\n- Depends on [garden-linux-release v0.332.0](https://github.com/cloudfoundry-incubator/garden-linux-release/releases/tag/v0.332.0).\n- Depends on [etcd-release v28](https://github.com/cloudfoundry-incubator/etcd-release/releases/tag/v28).\n\n### Significant changes\n\nNOTE: If you are not using the spiff-based manifest-generation tooling to generate your Diego deployment manifest, please be aware that some of the per-job consul agent configuration has changed with this version of the release. Diego components now set up their DNS health checks in consul themselves via the [locket](https://github.com/cloudfoundry-incubator/locket) library, instead of configuring the consul agent to do so. This means that most jobs will have removed the `consul.agent.services` property entirely. Jobs running etcd will keep only that 'etcd' service in the property, as in the following representative manifest snippet: \n\n``` yaml\njobs:\n- name: database_z1\n  templates:\n  - name: etcd\n    release: etcd\n  - name: bbs\n    release: diego\n  - name: consul_agent\n    release: cf\n  - name: metron_agent\n    release: cf\n  properties:\n    consul:\n      agent:\n        services:\n          etcd: {}\n```\n\nSee the changes to the `manifest-generation/diego.yml` file introduced in [diego-release commit 680aa9b](https://github.com/cloudfoundry-incubator/diego-release/commit/680aa9b31361f76af1fd5cca4be7dd081ed7339c) for more detail.\n\n#### BBS Benchmarks\n- [As a Diego developer, I would like the BBS benchmark suite to run periodic rep bulk retrieval loops](https://www.pivotaltracker.com/story/show/111842773)\n\n#### Manifest Generation\n- [cloudfoundry-incubator/diego-release #127: Minor manifest cleanups](https://www.pivotaltracker.com/story/show/112739293)\n\n#### Component Logging and Metrics\n- [Eliminate critical health-check noise from inactive HA components registered with consul DNS](https://www.pivotaltracker.com/story/show/103198238)\n\n#### Security\n- [Investigate whether Diego components are correctly configured to use the default VM cert store, so that they will correctly trust BOSH-provisioned CAs](https://www.pivotaltracker.com/story/show/111266678)\n\n### BOSH job changes\n\nThe `dns_health_check.erb` script template has been removed from the following job templates:\n- `auctioneer`\n- `bbs`\n- `cc_uploader`\n- `file_server`\n- `nsync`\n- `ssh_proxy`\n- `stager`\n- `tps`\n\n### BOSH property changes\n\nNone.\n"
}