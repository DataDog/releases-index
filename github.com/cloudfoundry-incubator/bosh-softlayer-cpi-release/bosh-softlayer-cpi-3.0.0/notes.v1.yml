{
  "Content": "Softlayer eCPI v3 final release:\r\n```\r\nreleases:\r\n- name: bosh-softlayer-cpi\r\n  url: https://bosh.io/d/github.com/cloudfoundry-incubator/bosh-softlayer-cpi-release?v=3.0.0\r\n  sha1: 21a5b78045b6832e4f7db058e862681e856f86ff\r\n``` \r\nFrom Softlayer eCPI v3, the following feature options are supported. \r\nIn bosh-init YML,\r\n```\r\njobs:\r\n- name: bosh\r\n  ...\r\n  properties:\r\n    ...\r\n    softlayer: \u0026softlayer\r\n      username: SOFTLAYER_USERNAME\r\n      apiKey: SOFTLAYER_APIKEY\r\n      featureOptions:\r\n        enablePool: true                        # \u003c-- Enable the vm pool feature. Default is false\r\n        apiEndpoint: api.service.softlayer.com  # \u003c-- Indicates the Softlayer API endpoint. Default is api.softlayer.com\r\n        apiRetryCount: 10                       # \u003c-- Indicates the retry times of accessing Softlayer API in case of failure. Default is 0\r\n        apiWaitTime: 5                          # \u003c-- The polling interval between two Softlayer API retries. \"5\" indicates 5 seconds polling interval. Default is 0\r\n        createIscsiVolumeTimeout: 3600          # \u003c-- The timeout value of total waiting time for creating a iscsi volume and attaching it the a vm. \"3600\" indicates 3600 seconds. Default is 600\r\n        createIscsiVolumePollingInterval: 5     # \u003c-- Within createIscsiVolumeTimeout value, in case of failure, the polling interval between retries. \"5\" indicates 5 second. Default is 0\r\n        disableOsReload: false                  # \u003c-- Indicates if os-reload is disabled or not. \"true\" means disable os-reload. Default is false\r\n    pool: \u0026pool               # \u003c-- Indicates the vm pool server information\r\n      host: 10.113.189.156    # \u003c-- The IP of vm pool server. Either private or public IP is OK\r\n      port: 12345             # \u003c-- The port of vm pool server. Default is 8889\r\n```\r\n \r\nThis is the guide on how to bootstrap a vm pool server (VPS) in Softlayer \r\nhttps://github.com/cloudfoundry-community/bosh-softlayer-baremetal-server-release/tree/1aa4c8e0b34c3508728c1dcbebc62048449e471a\r\n \r\nThis is how VPS feature works:\r\n* When deleting a vm, it's not really cancelled from Softlayer.\r\n    * If it's not in the vm pool, add it to the pool and mark it as \"free\".\r\n    * If it's already in the pool, just mark as \"free\".\r\n* When creating a vm\r\n    * First check if there is a suitable vm in the pool. The criteria includes [cpu, memory, public_vlan, private_vlan]. Only all of them are the same as required, the vm in pool is considered as \"suitable\". If there are suitable vms in the pool, a random one is selected. Then run os-reload and install jobs on the vm. During os-reload, the vm is marked as \"provisioning\". When os-reload is done, it's marked as \"using\". \r\n    * If there is no suitable vm in the pool, it will send a real order to Softlayer to create a new vm. After the vm is created, it's added to the vm pool and marked as \"using\".\r\n"
}